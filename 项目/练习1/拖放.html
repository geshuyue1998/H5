<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="icon" href="imgages/snowflake.png" />
	<style type="text/css">
		div{
			border:2px solid gray;
			width:180px;
			height:180px;
		}
	</style>
</head>
<body>
	<h3>上传头像</h3>
	<div  name="result" id="result" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
		<!--  //  <input type="file" id="file" />-->

<!--	<img src="'+this.result+'" id="dragimg" draggable="true" ondragstart="drag(event)" />
-->
</body>
<script>
	var result = document.getElementById("result");
	function readAsDataURL(ev) {
    if (typeof FileReader == 'undefined' )
	{
	   result.innerHTML = "<p>抱歉，你的浏览器不支持 FileReader</p>";
	   file.setAttribute( 'disabled','disabled' );
	}else{
    		var reader = new FileReader();
        	reader.readAsDataURL(ev);
        	reader.onload = function(){
	            var img = new Image();
	            img.src = this.result;
	            result.appendChild(img);
        	}
    	}   
    }


    document.ondragover = function (ev) {
        ev.preventDefault();  
    };
    document.ondrop = function (ev) {
        ev.preventDefault();  
    };

    result.ondragover = function (ev) {
        ev.preventDefault();
    };

    result.ondrop = function (ev) {
        var file = ev.dataTransfer.files[0];
        if(!/image\/\w+/.test(file.type))
	    {
	        alert("请确保文件为图像类型");
	        return false;
	    }   
        readAsDataURL(file);
    };

		
</script>
</html>